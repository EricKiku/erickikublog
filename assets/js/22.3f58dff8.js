(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{366:function(t,a,s){"use strict";s.r(a);var e=s(14),r=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"webpack高级"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack高级"}},[t._v("#")]),t._v(" Webpack高级")]),t._v(" "),a("p",[t._v("高级就是进行webpack优化，让代码在编译或运行时性能更好")]),t._v(" "),a("p",[t._v("以以下角度进行优化")]),t._v(" "),a("ul",[a("li",[t._v("提升开发体验")]),t._v(" "),a("li",[t._v("提升打包构建速度")]),t._v(" "),a("li",[t._v("减少代码体积")]),t._v(" "),a("li",[t._v("优化代码运行性能")])]),t._v(" "),a("h1",{attrs:{id:"提升开发体验"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#提升开发体验"}},[t._v("#")]),t._v(" 提升开发体验")]),t._v(" "),a("h2",{attrs:{id:"sourcemap"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sourcemap"}},[t._v("#")]),t._v(" SourceMap")]),t._v(" "),a("h4",{attrs:{id:"为什么使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么使用"}},[t._v("#")]),t._v(" 为什么使用")]),t._v(" "),a("p",[t._v("开发时运行的代码是通过编译的。")]),t._v(" "),a("p",[t._v("所有的css和js合并成一个文件，报错时不能准确找到错误的地方")]),t._v(" "),a("h4",{attrs:{id:"是什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#是什么"}},[t._v("#")]),t._v(" 是什么")]),t._v(" "),a("p",[a("code",[t._v("SourceMap(源代码映射)")]),t._v("是一个用来生成源代码和构建后代码一一映射的文件的方案")]),t._v(" "),a("p",[t._v("会生成一个"),a("code",[t._v("xxx.map")]),t._v("文件，包含了源代码和构建后的代码每一行每一列的映射关系")]),t._v(" "),a("h4",{attrs:{id:"怎么使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#怎么使用"}},[t._v("#")]),t._v(" 怎么使用")]),t._v(" "),a("ul",[a("li",[t._v("开发模式："),a("code",[t._v("cheap-module-source-map")]),t._v(" "),a("ul",[a("li",[t._v("优点：打包编译速度快，只包含行映射")]),t._v(" "),a("li",[t._v("缺点：没有列映射")])])])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("mode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"development"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("devtool")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cheap-module-source-map"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[t._v("生产模式："),a("code",[t._v("source-map")]),t._v(" "),a("ul",[a("li",[t._v("优点：包含行列映射")]),t._v(" "),a("li",[t._v("缺点：打包速度慢")])])])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("mode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"development"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("devtool")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"source-map"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h1",{attrs:{id:"提升打包速度"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#提升打包速度"}},[t._v("#")]),t._v(" 提升打包速度")]),t._v(" "),a("h2",{attrs:{id:"hotmodulereplacement"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hotmodulereplacement"}},[t._v("#")]),t._v(" HotModuleReplacement")]),t._v(" "),a("h4",{attrs:{id:"为什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么"}},[t._v("#")]),t._v(" 为什么")]),t._v(" "),a("p",[t._v("开发时修改了其中一个模块的代码，webpack会把所有的模块全部重新打包，但是我们只需要修改某个模块代码，就这个模块需要重新打包，其他不变，就很快")]),t._v(" "),a("p",[t._v("使用 vue-loader来自动使用")]),t._v(" "),a("h2",{attrs:{id:"oneof"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#oneof"}},[t._v("#")]),t._v(" OneOf")]),t._v(" "),a("h3",{attrs:{id:"为什么-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么-2"}},[t._v("#")]),t._v(" 为什么")]),t._v(" "),a("p",[t._v("每当有资源去查找loader，就会挨个查找，就算找到对应的loader，也会再向下找完")]),t._v(" "),a("h4",{attrs:{id:"怎么使用-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#怎么使用-2"}},[t._v("#")]),t._v(" 怎么使用")]),t._v(" "),a("p",[t._v("把所有的loader放在一个oneOf中：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("module")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("rules")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("oneOf")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    loader"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"include-exclude"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#include-exclude"}},[t._v("#")]),t._v(" Include/Exclude")]),t._v(" "),a("h4",{attrs:{id:"为什么-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么-3"}},[t._v("#")]),t._v(" 为什么")]),t._v(" "),a("p",[t._v("有些下载到node_modules中的文件是不需要编译就可以直接使用的。")]),t._v(" "),a("p",[t._v("所以对js文件处理时，要排除node_modules下的文件")]),t._v(" "),a("h4",{attrs:{id:"是什么-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#是什么-2"}},[t._v("#")]),t._v(" 是什么")]),t._v(" "),a("ul",[a("li",[t._v("include")])]),t._v(" "),a("p",[t._v("包含，只处理.xxx文件")]),t._v(" "),a("ul",[a("li",[t._v("exclude")])]),t._v(" "),a("p",[t._v("排除，除了.xxx文件以外的都处理")]),t._v(" "),a("h4",{attrs:{id:"怎么用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#怎么用"}},[t._v("#")]),t._v(" 怎么用")]),t._v(" "),a("p",[a("code",[t._v("exclude:")]),t._v("不处理指定的文件夹")]),t._v(" "),a("p",[a("code",[t._v('include:path.resolve(__dirname,"../src"),')]),t._v("：只处理哪些目录")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("modules"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("rules")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("test")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("\\.js$")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//排除node_modules中的js文件，这些文件不处理")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("exclude")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("node_modules")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("    \n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//include:path.resolve(__dirname,"../src"),')]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("loader")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'babel-loader'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("options")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//智能预设，能够编译ES6的语法")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// presets: ['@babel/preset-env']")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"cache"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cache"}},[t._v("#")]),t._v(" Cache")]),t._v(" "),a("h4",{attrs:{id:"为什么-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么-4"}},[t._v("#")]),t._v(" 为什么")]),t._v(" "),a("p",[t._v("每次打包时，js文件都要经过Eslint和Babel，速度比较慢")]),t._v(" "),a("p",[t._v("可以缓存之前的Eslint检查和Babel编译结果，这时第二次打包速度就快了")]),t._v(" "),a("h4",{attrs:{id:"是什么-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#是什么-3"}},[t._v("#")]),t._v(" 是什么")]),t._v(" "),a("p",[t._v("对Eslint检查和Babel编译结果进行缓存")]),t._v(" "),a("h4",{attrs:{id:"怎么用-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#怎么用-2"}},[t._v("#")]),t._v(" 怎么用")]),t._v(" "),a("p",[t._v("在"),a("code",[t._v("webpack.dev.js配置文件")]),t._v("或者"),a("code",[t._v("webpack.prod.js")]),t._v("中")]),t._v(" "),a("p",[t._v("开启Eslint缓存：")]),t._v(" "),a("p",[a("code",[t._v("cache:true")]),t._v("：开启缓存")]),t._v(" "),a("p",[a("code",[t._v('cacheLocation:path.resolve(__dirname,"../node_modules/.cache/eslintcache")')]),t._v("：为缓存文件指定目录")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code")])]),a("p",[t._v("开启Babel缓存：")]),t._v(" "),a("p",[a("code",[t._v("cacheDirectory:true,")]),t._v("//开启babel缓存")]),t._v(" "),a("p",[a("code",[t._v("cacheCompression:false")]),t._v("//关闭缓存文件压缩")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("module")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("rules")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("test")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("\\.js$")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//排除node_modules中的js文件，这些文件不处理")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// exclude: /node_modules/,    ")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("include")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"../src"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("loader")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'babel-loader'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("options")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//智能预设，能够编译ES6的语法")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// presets: ['@babel/preset-env']")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("cacheDirectory")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//开启babel缓存")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("cacheCompression")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//关闭缓存文件压缩")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"thead"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#thead"}},[t._v("#")]),t._v(" Thead")]),t._v(" "),a("h4",{attrs:{id:"为什么-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么-5"}},[t._v("#")]),t._v(" 为什么")]),t._v(" "),a("p",[t._v("对js文件处理的主要就是eslint、babel、thread三个工具，所以要提升打包速度，可以开启多进程同时处理js文件")]),t._v(" "),a("h4",{attrs:{id:"是什么-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#是什么-4"}},[t._v("#")]),t._v(" 是什么")]),t._v(" "),a("p",[t._v("多进程打包：开启电脑的多进程同时干一件事，速度更快")]),t._v(" "),a("p",[t._v("需要注意：仅在特别耗时的操作中使用，因为每个进程启动就大约有600ms的开销。")]),t._v(" "),a("h4",{attrs:{id:"怎么用-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#怎么用-3"}},[t._v("#")]),t._v(" 怎么用")]),t._v(" "),a("p",[t._v("直接看文档吧：https://webpack.docschina.org/loaders/thread-loader/")]),t._v(" "),a("p",[t._v("启动进程的数量就是CPU的核数")]),t._v(" "),a("ol",[a("li",[t._v("如何获取CPU的核数")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//nodejs核心模块，直接使用")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" os "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'os'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//cpu核数")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" threads "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" os"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cpus")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length\n")])])]),a("h2",{attrs:{id:"terserwebpackplugin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#terserwebpackplugin"}},[t._v("#")]),t._v(" TerserWebpackPlugin")]),t._v(" "),a("p",[t._v("压缩js代码，直接看文档：")]),t._v(" "),a("p",[t._v("https://webpack.docschina.org/plugins/terser-webpack-plugin/")]),t._v(" "),a("h1",{attrs:{id:"减少代码体积"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#减少代码体积"}},[t._v("#")]),t._v(" 减少代码体积")]),t._v(" "),a("h2",{attrs:{id:"tree-shaking"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tree-shaking"}},[t._v("#")]),t._v(" Tree Shaking")]),t._v(" "),a("h4",{attrs:{id:"为什么-6"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么-6"}},[t._v("#")]),t._v(" 为什么")]),t._v(" "),a("p",[t._v("开发时会引入一些工具库，如果没有特殊处理的话，就会引入整个库，实际上可能只会使用其中一小部分的功能，这样整个库都打包进来，体积太大")]),t._v(" "),a("h4",{attrs:{id:"是什么-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#是什么-5"}},[t._v("#")]),t._v(" 是什么")]),t._v(" "),a("p",[a("code",[t._v("Tree Shaking")]),t._v("是一个术语，通常用于移除JS中没有用的代码")]),t._v(" "),a("p",[t._v("依赖于："),a("code",[t._v("ES module")])]),t._v(" "),a("h4",{attrs:{id:"怎么用-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#怎么用-4"}},[t._v("#")]),t._v(" 怎么用")]),t._v(" "),a("p",[t._v("Webpack已经默认开启了功能，不需要配置")]),t._v(" "),a("h2",{attrs:{id:"babel"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#babel"}},[t._v("#")]),t._v(" Babel")]),t._v(" "),a("h4",{attrs:{id:"为什么-7"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么-7"}},[t._v("#")]),t._v(" 为什么")]),t._v(" "),a("p",[t._v("Babel 为编译的每个文件都插入了辅助代码，使代码体积过大")]),t._v(" "),a("p",[t._v("Babel对一些公共方法使用了 非常小的辅助代码，这个方法会被添加到每一个需要它的文件中")]),t._v(" "),a("p",[t._v("可以将这些辅助代码作为一个独立的模块，来避免重复引入")]),t._v(" "),a("h4",{attrs:{id:"是什么-6"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#是什么-6"}},[t._v("#")]),t._v(" 是什么")]),t._v(" "),a("p",[a("code",[t._v("@babel/plugin-transform-runtime")]),t._v("：禁用了Babel对每个文件的runtime注入，而是引入"),a("code",[t._v("@babel/plugin-transform-runtime")]),t._v("并且使得所有的辅助代码从这里引用。")]),t._v(" "),a("h4",{attrs:{id:"怎么用-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#怎么用-5"}},[t._v("#")]),t._v(" 怎么用")]),t._v(" "),a("ol",[a("li",[t._v("下载包")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npm install @babel/plugin-transform-runtime -D\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("配置")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("test")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("\\.js$")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//排除node_modules中的js文件，这些文件不处理")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("exclude")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("node_modules")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("    \n            "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("loader")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'babel-loader'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("options")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//智能预设，能够编译ES6的语法")]),t._v("\n                        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// presets: ['@babel/preset-env']")]),t._v("\n                        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("cacheDirectory")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//开启babel缓存")]),t._v("\n                        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("cacheCompression")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//关闭缓存文件压缩")]),t._v("\n                        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("plugins")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/plugin-transform-runtime"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//减少代码体积")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"image-minimizer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#image-minimizer"}},[t._v("#")]),t._v(" Image Minimizer")]),t._v(" "),a("h4",{attrs:{id:"为什么-8"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么-8"}},[t._v("#")]),t._v(" 为什么")]),t._v(" "),a("p",[t._v("开发时如果引入了多个图片，那么图片体积过大，就会让请求速度变慢，可以对图片进行压缩，减少图片体积")]),t._v(" "),a("h4",{attrs:{id:"是什么-7"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#是什么-7"}},[t._v("#")]),t._v(" 是什么")]),t._v(" "),a("p",[a("code",[t._v("image-minimizer-webpack-plugin")]),t._v("：用来压缩图片的插件")]),t._v(" "),a("h4",{attrs:{id:"怎么用-6"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#怎么用-6"}},[t._v("#")]),t._v(" 怎么用")]),t._v(" "),a("ol",[a("li",[t._v("下载包")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npm i image-minimizer-webpack-plugin imagemin -D\n")])])]),a("p",[t._v("还需要两个包：")]),t._v(" "),a("ul",[a("li",[t._v("无损压缩：")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npm install imagemin-gifsicle imagemin-jpegtran imagemin-optipng imagemin-svgo --save-dev\n")])])]),a("ul",[a("li",[t._v("有损压缩")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npm install imagemin-gifsicle imagemin-mozjpeg imagemin-pngquant imagemin-svgo --save-dev\n")])])]),a("p",[t._v("网址：\thttps://webpack.docschina.org/plugins/image-minimizer-webpack-plugin/")]),t._v(" "),a("h1",{attrs:{id:"优化代码运行性能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#优化代码运行性能"}},[t._v("#")]),t._v(" 优化代码运行性能")]),t._v(" "),a("h2",{attrs:{id:"code-split"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#code-split"}},[t._v("#")]),t._v(" Code Split")]),t._v(" "),a("h4",{attrs:{id:"为什么-9"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么-9"}},[t._v("#")]),t._v(" 为什么")]),t._v(" "),a("p",[t._v("打包时会把所有的js文件打包到一个文件中，用不到的js也会加载")]),t._v(" "),a("p",[t._v("所以需要将打包生成的文件进行分割，生成多个js文件，加载哪个页面就只加载哪个js文件")]),t._v(" "),a("h4",{attrs:{id:"是什么-8"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#是什么-8"}},[t._v("#")]),t._v(" 是什么")]),t._v(" "),a("p",[t._v("代码分割：")]),t._v(" "),a("ol",[a("li",[t._v("分割文件：将打包的文件进行分割，生成多个js文件")]),t._v(" "),a("li",[t._v("按需加载：需要哪个文件就加载哪个文件。")])]),t._v(" "),a("h4",{attrs:{id:"怎么用-7"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#怎么用-7"}},[t._v("#")]),t._v(" 怎么用")]),t._v(" "),a("p",[t._v("网址：\thttps://www.webpackjs.com/guides/code-splitting/")]),t._v(" "),a("h2",{attrs:{id:"preload-prefetch"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#preload-prefetch"}},[t._v("#")]),t._v(" Preload/Prefetch")]),t._v(" "),a("p",[t._v("Preload："),a("code",[t._v("让浏览器立即加载资源")])]),t._v(" "),a("p",[t._v("Prefetch："),a("code",[t._v("让浏览器在空闲时加载资源")])]),t._v(" "),a("h1",{attrs:{id:"原理部分"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#原理部分"}},[t._v("#")]),t._v(" 原理部分")]),t._v(" "),a("p",[t._v("视频：\thttps://www.bilibili.com/video/BV14T4y1z7sw?p=65&vd_source=4826e78be6a985a9a8641312e495221e")])])}),[],!1,null,null,null);a.default=r.exports}}]);